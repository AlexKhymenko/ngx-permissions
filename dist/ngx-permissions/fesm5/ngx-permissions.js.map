{"version":3,"sources":["C:/Users/Oleksandr.Khymenko/WebstormProjects/ngx-permissions/dist/ngx-permissions/fesm5/ngx-permissions.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;AAYA;;;;;;;;;;;;;KAaK,AAGC;;;;;;+EAE2E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAqH3E,AAGA;;;;;;;;;;;;oZAKG;;;;;;;;;;;;KAYJ,AAGC;;;;;;iFAE8D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAyT9D,AAGA;;;;;;;;;;;;sWAKG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA+NH,AAGA;;;;;;;;;;;;;qTAMG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAicH,AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cA2BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAscA,AAGA;;;;;;;;;;2nBAMG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAuCH,AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cAuBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAuCA,AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cAsBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MA4EA;;;;;;;;;;;;;;;iLAWA;;;;;KAKD;;;;;;;;;;;;;;;4MAWC;;;;;KAKD;;;;;;;;;;;;;;;qNAWC","file":"ngx-permissions.js","sourcesContent":["import { Injectable, InjectionToken, Inject, Directive, ViewContainerRef, ChangeDetectorRef, TemplateRef, Input, Output, EventEmitter, NgModule } from '@angular/core';\nimport { BehaviorSubject, of, from, merge, forkJoin } from 'rxjs';\nimport { map, switchMap, catchError, mergeAll, first, mergeMap, every, skip, take, tap } from 'rxjs/operators';\nimport { __assign, __read } from 'tslib';\nimport { isArray } from 'util';\nimport { Router } from '@angular/router';\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/** @type {?} */\r\nvar NgxPermissionsPredefinedStrategies = {\r\n    REMOVE: 'remove',\r\n    SHOW: 'show'\r\n};\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxPermissionsConfigurationStore = /** @class */ (function () {\r\n    function NgxPermissionsConfigurationStore() {\r\n        this.strategiesSource = new BehaviorSubject({});\r\n        this.strategies$ = this.strategiesSource.asObservable();\r\n    }\r\n    NgxPermissionsConfigurationStore.decorators = [\r\n        { type: Injectable }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsConfigurationStore.ctorParameters = function () { return []; };\r\n    return NgxPermissionsConfigurationStore;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/** @type {?} */\r\nvar USE_CONFIGURATION_STORE = new InjectionToken('USE_CONFIGURATION_STORE');\r\nvar NgxPermissionsConfigurationService = /** @class */ (function () {\r\n    function NgxPermissionsConfigurationService(isolate, configurationStore) {\r\n        if (isolate === void 0) { isolate = false; }\r\n        this.isolate = isolate;\r\n        this.configurationStore = configurationStore;\r\n        this.strategiesSource = this.isolate ? new BehaviorSubject({}) : this.configurationStore.strategiesSource;\r\n        this.strategies$ = this.strategiesSource.asObservable();\r\n        this.onAuthorisedDefaultStrategy = this.isolate ? undefined : this.configurationStore.onAuthorisedDefaultStrategy;\r\n        this.onUnAuthorisedDefaultStrategy = this.isolate ? undefined : this.configurationStore.onUnAuthorisedDefaultStrategy;\r\n    }\r\n    /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsConfigurationService.prototype.setDefaultOnAuthorizedStrategy = /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    function (name) {\r\n        if (this.isolate) {\r\n            this.onAuthorisedDefaultStrategy = this.getDefinedStrategy(name);\r\n        }\r\n        else {\r\n            this.configurationStore.onAuthorisedDefaultStrategy = this.getDefinedStrategy(name);\r\n            this.onAuthorisedDefaultStrategy = this.configurationStore.onAuthorisedDefaultStrategy;\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsConfigurationService.prototype.setDefaultOnUnauthorizedStrategy = /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    function (name) {\r\n        if (this.isolate) {\r\n            this.onUnAuthorisedDefaultStrategy = this.getDefinedStrategy(name);\r\n        }\r\n        else {\r\n            this.configurationStore.onUnAuthorisedDefaultStrategy = this.getDefinedStrategy(name);\r\n            this.onUnAuthorisedDefaultStrategy = this.configurationStore.onUnAuthorisedDefaultStrategy;\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} key\r\n     * @param {?} func\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsConfigurationService.prototype.addPermissionStrategy = /**\r\n     * @param {?} key\r\n     * @param {?} func\r\n     * @return {?}\r\n     */\r\n    function (key, func) {\r\n        this.strategiesSource.value[key] = func;\r\n    };\r\n    /**\r\n     * @param {?} key\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsConfigurationService.prototype.getStrategy = /**\r\n     * @param {?} key\r\n     * @return {?}\r\n     */\r\n    function (key) {\r\n        return this.strategiesSource.value[key];\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsConfigurationService.prototype.getAllStrategies = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.strategiesSource.value;\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsConfigurationService.prototype.getDefinedStrategy = /**\r\n     * @private\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    function (name) {\r\n        if (this.strategiesSource.value[name] || this.isPredefinedStrategy(name)) {\r\n            return name;\r\n        }\r\n        else {\r\n            throw new Error(\"No ' \" + name + \" ' strategy is found please define one\");\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} strategy\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsConfigurationService.prototype.isPredefinedStrategy = /**\r\n     * @private\r\n     * @param {?} strategy\r\n     * @return {?}\r\n     */\r\n    function (strategy) {\r\n        return strategy === NgxPermissionsPredefinedStrategies.SHOW || strategy === NgxPermissionsPredefinedStrategies.REMOVE;\r\n    };\r\n    NgxPermissionsConfigurationService.decorators = [\r\n        { type: Injectable }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsConfigurationService.ctorParameters = function () { return [\r\n        { type: Boolean, decorators: [{ type: Inject, args: [USE_CONFIGURATION_STORE,] }] },\r\n        { type: NgxPermissionsConfigurationStore }\r\n    ]; };\r\n    return NgxPermissionsConfigurationService;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxPermissionsStore = /** @class */ (function () {\r\n    function NgxPermissionsStore() {\r\n        this.permissionsSource = new BehaviorSubject({});\r\n        this.permissions$ = this.permissionsSource.asObservable();\r\n    }\r\n    NgxPermissionsStore.decorators = [\r\n        { type: Injectable }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsStore.ctorParameters = function () { return []; };\r\n    return NgxPermissionsStore;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/**\r\n * @param {?} functionToCheck\r\n * @return {?}\r\n */\r\nfunction isFunction(functionToCheck) {\r\n    /** @type {?} */\r\n    var getType = {};\r\n    return !!functionToCheck && functionToCheck instanceof Function && getType.toString.call(functionToCheck) === '[object Function]';\r\n}\r\n/**\r\n * @param {?} value\r\n * @return {?}\r\n */\r\nfunction isPlainObject(value) {\r\n    if (Object.prototype.toString.call(value) !== '[object Object]') {\r\n        return false;\r\n    }\r\n    else {\r\n        /** @type {?} */\r\n        var prototype = Object.getPrototypeOf(value);\r\n        return prototype === null || prototype === Object.prototype;\r\n    }\r\n}\r\n/**\r\n * @param {?} value\r\n * @return {?}\r\n */\r\nfunction isString(value) {\r\n    return !!value && typeof value === 'string';\r\n}\r\n/**\r\n * @param {?} value\r\n * @return {?}\r\n */\r\nfunction isBoolean(value) {\r\n    return typeof value === 'boolean';\r\n}\r\n/**\r\n * @param {?} promise\r\n * @return {?}\r\n */\r\nfunction isPromise(promise) {\r\n    return Object.prototype.toString.call(promise) === '[object Promise]';\r\n}\r\n/**\r\n * @param {?} value\r\n * @return {?}\r\n */\r\nfunction notEmptyValue(value) {\r\n    if (Array.isArray(value)) {\r\n        return value.length > 0;\r\n    }\r\n    return !!value;\r\n}\r\n/**\r\n * @param {?} value\r\n * @return {?}\r\n */\r\nfunction transformStringToArray(value) {\r\n    if (isString(value)) {\r\n        return [value];\r\n    }\r\n    return value;\r\n}\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/** @type {?} */\r\nvar USE_PERMISSIONS_STORE = new InjectionToken('USE_PERMISSIONS_STORE');\r\nvar NgxPermissionsService = /** @class */ (function () {\r\n    function NgxPermissionsService(isolate, permissionsStore) {\r\n        if (isolate === void 0) { isolate = false; }\r\n        this.isolate = isolate;\r\n        this.permissionsStore = permissionsStore;\r\n        this.permissionsSource = isolate ? new BehaviorSubject({}) : permissionsStore.permissionsSource;\r\n        this.permissions$ = this.permissionsSource.asObservable();\r\n    }\r\n    /**\r\n     * Remove all permissions from permissions source\r\n     */\r\n    /**\r\n     * Remove all permissions from permissions source\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.flushPermissions = /**\r\n     * Remove all permissions from permissions source\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.permissionsSource.next({});\r\n    };\r\n    /**\r\n     * @param {?} permission\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.hasPermission = /**\r\n     * @param {?} permission\r\n     * @return {?}\r\n     */\r\n    function (permission) {\r\n        if (!permission || (Array.isArray(permission) && permission.length === 0)) {\r\n            return Promise.resolve(true);\r\n        }\r\n        permission = transformStringToArray(permission);\r\n        return this.hasArrayPermission(permission);\r\n    };\r\n    /**\r\n     * @param {?} permissions\r\n     * @param {?=} validationFunction\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.loadPermissions = /**\r\n     * @param {?} permissions\r\n     * @param {?=} validationFunction\r\n     * @return {?}\r\n     */\r\n    function (permissions, validationFunction) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var newPermissions = permissions.reduce((/**\r\n         * @param {?} source\r\n         * @param {?} p\r\n         * @return {?}\r\n         */\r\n        function (source, p) {\r\n            return _this.reducePermission(source, p, validationFunction);\r\n        }), {});\r\n        this.permissionsSource.next(newPermissions);\r\n    };\r\n    /**\r\n     * @param {?} permission\r\n     * @param {?=} validationFunction\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.addPermission = /**\r\n     * @param {?} permission\r\n     * @param {?=} validationFunction\r\n     * @return {?}\r\n     */\r\n    function (permission, validationFunction) {\r\n        var _this = this;\r\n        if (Array.isArray(permission)) {\r\n            /** @type {?} */\r\n            var permissions = permission.reduce((/**\r\n             * @param {?} source\r\n             * @param {?} p\r\n             * @return {?}\r\n             */\r\n            function (source, p) {\r\n                return _this.reducePermission(source, p, validationFunction);\r\n            }), this.permissionsSource.value);\r\n            this.permissionsSource.next(permissions);\r\n        }\r\n        else {\r\n            /** @type {?} */\r\n            var permissions = this.reducePermission(this.permissionsSource.value, permission, validationFunction);\r\n            this.permissionsSource.next(permissions);\r\n        }\r\n    };\r\n    /**\r\n     * @param {?} permissionName\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.removePermission = /**\r\n     * @param {?} permissionName\r\n     * @return {?}\r\n     */\r\n    function (permissionName) {\r\n        /** @type {?} */\r\n        var permissions = __assign({}, this.permissionsSource.value);\r\n        delete permissions[permissionName];\r\n        this.permissionsSource.next(permissions);\r\n    };\r\n    /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.getPermission = /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    function (name) {\r\n        return this.permissionsSource.value[name];\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.getPermissions = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.permissionsSource.value;\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} source\r\n     * @param {?} name\r\n     * @param {?=} validationFunction\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.reducePermission = /**\r\n     * @private\r\n     * @param {?} source\r\n     * @param {?} name\r\n     * @param {?=} validationFunction\r\n     * @return {?}\r\n     */\r\n    function (source, name, validationFunction) {\r\n        var _a, _b;\r\n        if (!!validationFunction && isFunction(validationFunction)) {\r\n            return __assign({}, source, (_a = {}, _a[name] = { name: name, validationFunction: validationFunction }, _a));\r\n        }\r\n        else {\r\n            return __assign({}, source, (_b = {}, _b[name] = { name: name }, _b));\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.hasArrayPermission = /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @return {?}\r\n     */\r\n    function (permissions) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var promises = permissions.map((/**\r\n         * @param {?} key\r\n         * @return {?}\r\n         */\r\n        function (key) {\r\n            if (_this.hasPermissionValidationFunction(key)) {\r\n                /** @type {?} */\r\n                var immutableValue_1 = __assign({}, _this.permissionsSource.value);\r\n                /** @type {?} */\r\n                var validationFunction_1 = (/** @type {?} */ (_this.permissionsSource.value[key].validationFunction));\r\n                return of(null).pipe(map((/**\r\n                 * @return {?}\r\n                 */\r\n                function () {\r\n                    return validationFunction_1(key, immutableValue_1);\r\n                })), switchMap((/**\r\n                 * @param {?} promise\r\n                 * @return {?}\r\n                 */\r\n                function (promise) {\r\n                    /** @type {?} */\r\n                    var b = isBoolean(promise);\r\n                    if (b) {\r\n                        return of((/** @type {?} */ (promise)));\r\n                    }\r\n                    else {\r\n                        return (/** @type {?} */ (promise));\r\n                    }\r\n                })), catchError((/**\r\n                 * @return {?}\r\n                 */\r\n                function () { return of(false); })));\r\n            }\r\n            // check for name of the permission if there is no validation function\r\n            return of(!!_this.permissionsSource.value[key]);\r\n        }));\r\n        return from(promises).pipe(mergeAll(), first((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) {\r\n            /** @type {?} */\r\n            var r = data !== false;\r\n            return r;\r\n        }), false), map((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) {\r\n            /** @type {?} */\r\n            var r = data === false ? false : true;\r\n            return r;\r\n        }))).toPromise().then((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) {\r\n            return data;\r\n        }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} key\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsService.prototype.hasPermissionValidationFunction = /**\r\n     * @private\r\n     * @param {?} key\r\n     * @return {?}\r\n     */\r\n    function (key) {\r\n        return !!this.permissionsSource.value[key] &&\r\n            !!this.permissionsSource.value[key].validationFunction &&\r\n            isFunction(this.permissionsSource.value[key].validationFunction);\r\n    };\r\n    NgxPermissionsService.decorators = [\r\n        { type: Injectable }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsService.ctorParameters = function () { return [\r\n        { type: Boolean, decorators: [{ type: Inject, args: [USE_PERMISSIONS_STORE,] }] },\r\n        { type: NgxPermissionsStore }\r\n    ]; };\r\n    return NgxPermissionsService;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxRolesStore = /** @class */ (function () {\r\n    function NgxRolesStore() {\r\n        this.rolesSource = new BehaviorSubject({});\r\n        this.roles$ = this.rolesSource.asObservable();\r\n    }\r\n    return NgxRolesStore;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\n/** @type {?} */\r\nvar USE_ROLES_STORE = new InjectionToken('USE_ROLES_STORE');\r\nvar NgxRolesService = /** @class */ (function () {\r\n    function NgxRolesService(isolate, rolesStore, permissionsService) {\r\n        if (isolate === void 0) { isolate = false; }\r\n        this.isolate = isolate;\r\n        this.rolesStore = rolesStore;\r\n        this.permissionsService = permissionsService;\r\n        this.rolesSource = this.isolate ? new BehaviorSubject({}) : this.rolesStore.rolesSource;\r\n        this.roles$ = this.rolesSource.asObservable();\r\n    }\r\n    /**\r\n     * @param {?} name\r\n     * @param {?} validationFunction\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.addRole = /**\r\n     * @param {?} name\r\n     * @param {?} validationFunction\r\n     * @return {?}\r\n     */\r\n    function (name, validationFunction) {\r\n        var _a;\r\n        /** @type {?} */\r\n        var roles = __assign({}, this.rolesSource.value, (_a = {}, _a[name] = { name: name, validationFunction: validationFunction }, _a));\r\n        this.rolesSource.next(roles);\r\n    };\r\n    /**\r\n     * @param {?} rolesObj\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.addRoles = /**\r\n     * @param {?} rolesObj\r\n     * @return {?}\r\n     */\r\n    function (rolesObj) {\r\n        var _this = this;\r\n        Object.keys(rolesObj).forEach((/**\r\n         * @param {?} key\r\n         * @param {?} index\r\n         * @return {?}\r\n         */\r\n        function (key, index) {\r\n            _this.addRole(key, rolesObj[key]);\r\n        }));\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.flushRoles = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.rolesSource.next({});\r\n    };\r\n    /**\r\n     * @param {?} roleName\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.removeRole = /**\r\n     * @param {?} roleName\r\n     * @return {?}\r\n     */\r\n    function (roleName) {\r\n        /** @type {?} */\r\n        var roles = __assign({}, this.rolesSource.value);\r\n        delete roles[roleName];\r\n        this.rolesSource.next(roles);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.getRoles = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.rolesSource.value;\r\n    };\r\n    /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.getRole = /**\r\n     * @param {?} name\r\n     * @return {?}\r\n     */\r\n    function (name) {\r\n        return this.rolesSource.value[name];\r\n    };\r\n    /**\r\n     * @param {?} names\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.hasOnlyRoles = /**\r\n     * @param {?} names\r\n     * @return {?}\r\n     */\r\n    function (names) {\r\n        /** @type {?} */\r\n        var isNamesEmpty = !names || (Array.isArray(names) && names.length === 0);\r\n        if (isNamesEmpty)\r\n            return Promise.resolve(true);\r\n        names = transformStringToArray(names);\r\n        return Promise.all([this.hasRoleKey(names), this.hasRolePermission(this.rolesSource.value, names)])\r\n            .then((/**\r\n         * @param {?} __0\r\n         * @return {?}\r\n         */\r\n        function (_a) {\r\n            var _b = __read(_a, 2), hasRoles = _b[0], hasPermissions = _b[1];\r\n            return hasRoles || hasPermissions;\r\n        }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} roleName\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.hasRoleKey = /**\r\n     * @private\r\n     * @param {?} roleName\r\n     * @return {?}\r\n     */\r\n    function (roleName) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var promises = roleName.map((/**\r\n         * @param {?} key\r\n         * @return {?}\r\n         */\r\n        function (key) {\r\n            /** @type {?} */\r\n            var hasValidationFunction = !!_this.rolesSource.value[key] &&\r\n                !!_this.rolesSource.value[key].validationFunction &&\r\n                isFunction(_this.rolesSource.value[key].validationFunction);\r\n            if (hasValidationFunction && !isPromise(_this.rolesSource.value[key].validationFunction)) {\r\n                /** @type {?} */\r\n                var validationFunction_1 = (/** @type {?} */ (_this.rolesSource.value[key].validationFunction));\r\n                return of(null).pipe(map((/**\r\n                 * @return {?}\r\n                 */\r\n                function () { return validationFunction_1(); })), switchMap((/**\r\n                 * @param {?} promise\r\n                 * @return {?}\r\n                 */\r\n                function (promise) { return isBoolean(promise) ?\r\n                    of((/** @type {?} */ (promise))) : (/** @type {?} */ (promise)); })), catchError((/**\r\n                 * @return {?}\r\n                 */\r\n                function () { return of(false); })));\r\n            }\r\n            return of(false);\r\n        }));\r\n        return from(promises).pipe(mergeAll(), first((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) { return data !== false; }), false), map((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) { return data !== false; }))).toPromise().then((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) { return data; }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} roles\r\n     * @param {?} roleNames\r\n     * @return {?}\r\n     */\r\n    NgxRolesService.prototype.hasRolePermission = /**\r\n     * @private\r\n     * @param {?} roles\r\n     * @param {?} roleNames\r\n     * @return {?}\r\n     */\r\n    function (roles, roleNames) {\r\n        var _this = this;\r\n        return from(roleNames).pipe(mergeMap((/**\r\n         * @param {?} key\r\n         * @return {?}\r\n         */\r\n        function (key) {\r\n            if (roles[key] && Array.isArray(roles[key].validationFunction)) {\r\n                return from((/** @type {?} */ (roles[key].validationFunction))).pipe(mergeMap((/**\r\n                 * @param {?} permission\r\n                 * @return {?}\r\n                 */\r\n                function (permission) { return _this.permissionsService.hasPermission(permission); })), every((/**\r\n                 * @param {?} hasPermissions\r\n                 * @return {?}\r\n                 */\r\n                function (hasPermissions) { return hasPermissions === true; })));\r\n            }\r\n            return of(false);\r\n        })), first((/**\r\n         * @param {?} hasPermission\r\n         * @return {?}\r\n         */\r\n        function (hasPermission) { return hasPermission === true; }), false)).toPromise();\r\n    };\r\n    NgxRolesService.decorators = [\r\n        { type: Injectable }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxRolesService.ctorParameters = function () { return [\r\n        { type: Boolean, decorators: [{ type: Inject, args: [USE_ROLES_STORE,] }] },\r\n        { type: NgxRolesStore },\r\n        { type: NgxPermissionsService }\r\n    ]; };\r\n    return NgxRolesService;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxPermissionsDirective = /** @class */ (function () {\r\n    function NgxPermissionsDirective(permissionsService, configurationService, rolesService, viewContainer, changeDetector, templateRef) {\r\n        this.permissionsService = permissionsService;\r\n        this.configurationService = configurationService;\r\n        this.rolesService = rolesService;\r\n        this.viewContainer = viewContainer;\r\n        this.changeDetector = changeDetector;\r\n        this.templateRef = templateRef;\r\n        this.permissionsAuthorized = new EventEmitter();\r\n        this.permissionsUnauthorized = new EventEmitter();\r\n        // skip first run cause merge will fire twice\r\n        this.firstMergeUnusedRun = 1;\r\n        this.permissionsState = {};\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.viewContainer.clear();\r\n        this.initPermissionSubscription = this.validateExceptOnlyPermissions();\r\n    };\r\n    /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.ngOnChanges = /**\r\n     * @param {?} changes\r\n     * @return {?}\r\n     */\r\n    function (changes) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var onlyChanges = changes['ngxPermissionsOnly'];\r\n        /** @type {?} */\r\n        var exceptChanges = changes['ngxPermissionsExcept'];\r\n        if (onlyChanges || exceptChanges) {\r\n            // Due to bug when you pass empty array\r\n            if (onlyChanges && onlyChanges.firstChange)\r\n                return;\r\n            if (exceptChanges && exceptChanges.firstChange)\r\n                return;\r\n            merge(this.permissionsService.permissions$, this.rolesService.roles$)\r\n                .pipe(skip(this.firstMergeUnusedRun), take(1))\r\n                .subscribe((/**\r\n             * @return {?}\r\n             */\r\n            function () {\r\n                if (notEmptyValue(_this.ngxPermissionsExcept)) {\r\n                    _this.validateExceptAndOnlyPermissions();\r\n                    return;\r\n                }\r\n                if (notEmptyValue(_this.ngxPermissionsOnly)) {\r\n                    _this.validateOnlyPermissions();\r\n                    return;\r\n                }\r\n                _this.handleAuthorisedPermission(_this.getAuthorisedTemplates());\r\n            }));\r\n        }\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.ngOnDestroy = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        if (this.initPermissionSubscription) {\r\n            this.initPermissionSubscription.unsubscribe();\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.validateExceptOnlyPermissions = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        return merge(this.permissionsService.permissions$, this.rolesService.roles$)\r\n            .pipe(skip(this.firstMergeUnusedRun))\r\n            .subscribe((/**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            if (notEmptyValue(_this.ngxPermissionsExcept)) {\r\n                _this.validateExceptAndOnlyPermissions();\r\n                return;\r\n            }\r\n            if (notEmptyValue(_this.ngxPermissionsOnly)) {\r\n                _this.validateOnlyPermissions();\r\n                return;\r\n            }\r\n            _this.handleAuthorisedPermission(_this.getAuthorisedTemplates());\r\n        }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.validateExceptAndOnlyPermissions = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        this.getPermissions(this.ngxPermissionsExcept)\r\n            .then((/**\r\n         * @param {?} hasPermission\r\n         * @return {?}\r\n         */\r\n        function (hasPermission) {\r\n            if (hasPermission) {\r\n                _this.handleUnauthorisedPermission(_this.ngxPermissionsExceptElse || _this.ngxPermissionsElse);\r\n                return;\r\n            }\r\n            if (!!_this.ngxPermissionsOnly)\r\n                throw false;\r\n            _this.handleAuthorisedPermission(_this.ngxPermissionsExceptThen || _this.ngxPermissionsThen || _this.templateRef);\r\n        }))\r\n            .catch((/**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            if (!!_this.ngxPermissionsOnly) {\r\n                _this.validateOnlyPermissions();\r\n            }\r\n            else {\r\n                _this.handleAuthorisedPermission(_this.ngxPermissionsExceptThen || _this.ngxPermissionsThen || _this.templateRef);\r\n            }\r\n        }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.validateOnlyPermissions = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        var _this = this;\r\n        // Validate permissions & store permission state\r\n        this.getPermissions(this.ngxPermissionsOnly)\r\n            .then((/**\r\n         * @param {?} hasPermission\r\n         * @return {?}\r\n         */\r\n        function (hasPermission) {\r\n            if (hasPermission) {\r\n                _this.handleAuthorisedPermission(_this.ngxPermissionsOnlyThen || _this.ngxPermissionsThen || _this.templateRef);\r\n            }\r\n            else {\r\n                _this.handleUnauthorisedPermission(_this.ngxPermissionsOnlyElse || _this.ngxPermissionsElse);\r\n            }\r\n        }))\r\n            .catch((/**\r\n         * @return {?}\r\n         */\r\n        function () {\r\n            _this.handleUnauthorisedPermission(_this.ngxPermissionsOnlyElse || _this.ngxPermissionsElse);\r\n        }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} template\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.handleUnauthorisedPermission = /**\r\n     * @private\r\n     * @param {?} template\r\n     * @return {?}\r\n     */\r\n    function (template) {\r\n        if (isBoolean(this.currentAuthorizedState) && !this.currentAuthorizedState)\r\n            return;\r\n        this.currentAuthorizedState = false;\r\n        this.permissionsUnauthorized.emit(this.permissionsState);\r\n        if (this.getUnAuthorizedStrategyInput()) {\r\n            this.applyStrategyAccordingToStrategyType(this.getUnAuthorizedStrategyInput());\r\n            return;\r\n        }\r\n        if (this.configurationService.onUnAuthorisedDefaultStrategy && !this.elseBlockDefined()) {\r\n            this.applyStrategy(this.configurationService.onUnAuthorisedDefaultStrategy);\r\n        }\r\n        else {\r\n            this.showTemplateBlockInView(template);\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} template\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.handleAuthorisedPermission = /**\r\n     * @private\r\n     * @param {?} template\r\n     * @return {?}\r\n     */\r\n    function (template) {\r\n        if (isBoolean(this.currentAuthorizedState) && this.currentAuthorizedState)\r\n            return;\r\n        this.currentAuthorizedState = true;\r\n        this.permissionsAuthorized.emit(this.permissionsState);\r\n        if (this.getAuthorizedStrategyInput()) {\r\n            this.applyStrategyAccordingToStrategyType(this.getAuthorizedStrategyInput());\r\n            return;\r\n        }\r\n        if (this.configurationService.onAuthorisedDefaultStrategy && !this.thenBlockDefined()) {\r\n            this.applyStrategy(this.configurationService.onAuthorisedDefaultStrategy);\r\n        }\r\n        else {\r\n            this.showTemplateBlockInView(template);\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} strategy\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.applyStrategyAccordingToStrategyType = /**\r\n     * @private\r\n     * @param {?} strategy\r\n     * @return {?}\r\n     */\r\n    function (strategy) {\r\n        if (isString(strategy)) {\r\n            this.applyStrategy(strategy);\r\n            return;\r\n        }\r\n        if (isFunction(strategy)) {\r\n            this.showTemplateBlockInView(this.templateRef);\r\n            ((/** @type {?} */ (strategy)))(this.templateRef, this.permissionsState);\r\n            return;\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} template\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.showTemplateBlockInView = /**\r\n     * @private\r\n     * @param {?} template\r\n     * @return {?}\r\n     */\r\n    function (template) {\r\n        this.viewContainer.clear();\r\n        if (!template) {\r\n            return;\r\n        }\r\n        this.viewContainer.createEmbeddedView(template);\r\n        this.changeDetector.markForCheck();\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.getAuthorisedTemplates = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.ngxPermissionsOnlyThen\r\n            || this.ngxPermissionsExceptThen\r\n            || this.ngxPermissionsThen\r\n            || this.templateRef;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.elseBlockDefined = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return !!this.ngxPermissionsExceptElse || !!this.ngxPermissionsElse;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.thenBlockDefined = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return !!this.ngxPermissionsExceptThen || !!this.ngxPermissionsThen;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.getAuthorizedStrategyInput = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.ngxPermissionsOnlyAuthorisedStrategy ||\r\n            this.ngxPermissionsExceptAuthorisedStrategy ||\r\n            this.ngxPermissionsAuthorisedStrategy;\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.getUnAuthorizedStrategyInput = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.ngxPermissionsOnlyUnauthorisedStrategy ||\r\n            this.ngxPermissionsExceptUnauthorisedStrategy ||\r\n            this.ngxPermissionsUnauthorisedStrategy;\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} str\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.applyStrategy = /**\r\n     * @private\r\n     * @param {?} str\r\n     * @return {?}\r\n     */\r\n    function (str) {\r\n        if (str === NgxPermissionsPredefinedStrategies.SHOW) {\r\n            this.showTemplateBlockInView(this.templateRef);\r\n            return;\r\n        }\r\n        if (str === NgxPermissionsPredefinedStrategies.REMOVE) {\r\n            this.viewContainer.clear();\r\n            return;\r\n        }\r\n        /** @type {?} */\r\n        var strategy = this.configurationService.getStrategy(str);\r\n        this.showTemplateBlockInView(this.templateRef);\r\n        strategy(this.templateRef, this.permissionsState);\r\n    };\r\n    /**\r\n     * Check permission service against parameter \"neddedPermissions\"\r\n     * then update this class property \"permissionsState\"\r\n     *\r\n     * @param neddedPermissions Sets the permissions/roles to check (i.e ngxPermissionsOnly)\r\n     */\r\n    /**\r\n     * Check permission service against parameter \"neddedPermissions\"\r\n     * then update this class property \"permissionsState\"\r\n     *\r\n     * @private\r\n     * @param {?} neddedPermissions Sets the permissions/roles to check (i.e ngxPermissionsOnly)\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsDirective.prototype.getPermissions = /**\r\n     * Check permission service against parameter \"neddedPermissions\"\r\n     * then update this class property \"permissionsState\"\r\n     *\r\n     * @private\r\n     * @param {?} neddedPermissions Sets the permissions/roles to check (i.e ngxPermissionsOnly)\r\n     * @return {?}\r\n     */\r\n    function (neddedPermissions) {\r\n        var _this = this;\r\n        // Ensure we work with array\r\n        /** @type {?} */\r\n        var requestedPermissions = transformStringToArray(neddedPermissions)\r\n        // Array of promises that request permission and roles service with \"permission\"\r\n        ;\r\n        // Array of promises that request permission and roles service with \"permission\"\r\n        /** @type {?} */\r\n        var promises = []\r\n        // Reset \"permissions state\" directive class property\r\n        ;\r\n        // Reset \"permissions state\" directive class property\r\n        this.permissionsState = {};\r\n        if (isArray(requestedPermissions)) {\r\n            requestedPermissions.forEach((/**\r\n             * @param {?} value\r\n             * @return {?}\r\n             */\r\n            function (value) {\r\n                _this.permissionsState[value] = { hasPermission: false, hasRole: false };\r\n                // Check if has \"Permission\"\r\n                promises.push(_this.permissionsService.hasPermission(value)\r\n                    .then((/**\r\n                 * @param {?} hasPermission\r\n                 * @return {?}\r\n                 */\r\n                function (hasPermission) {\r\n                    _this.permissionsState[value].hasPermission = hasPermission;\r\n                    return hasPermission;\r\n                }))\r\n                    .catch((/**\r\n                 * @return {?}\r\n                 */\r\n                function () { return false; })));\r\n                // Check if has \"Role\"\r\n                promises.push(_this.rolesService.hasOnlyRoles(value)\r\n                    .then((/**\r\n                 * @param {?} hasPermission\r\n                 * @return {?}\r\n                 */\r\n                function (hasPermission) {\r\n                    _this.permissionsState[value].hasRole = hasPermission;\r\n                    return hasPermission;\r\n                }))\r\n                    .catch((/**\r\n                 * @return {?}\r\n                 */\r\n                function () { return false; })));\r\n            }));\r\n        }\r\n        /**\r\n         * Return result :\r\n         * true : At least one of neededPermission exists in permission or role service (@see this.permissionsState to get a full detail on wich permission is true/false)\r\n         * false : none of neededPermission exists in  permission or role service\r\n        */\r\n        return from(promises).pipe(mergeAll(), first((/**\r\n         * @param {?} hasPermission\r\n         * @return {?}\r\n         */\r\n        function (hasPermission) {\r\n            return hasPermission === true;\r\n        }), false), map((/**\r\n         * @param {?} hasPermission\r\n         * @return {?}\r\n         */\r\n        function (hasPermission) {\r\n            return hasPermission;\r\n        }))).toPromise().then((/**\r\n         * @param {?} hasPermission\r\n         * @return {?}\r\n         */\r\n        function (hasPermission) {\r\n            return hasPermission;\r\n        }));\r\n    };\r\n    NgxPermissionsDirective.decorators = [\r\n        { type: Directive, args: [{\r\n                    selector: '[ngxPermissionsOnly],[ngxPermissionsExcept]'\r\n                },] }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsDirective.ctorParameters = function () { return [\r\n        { type: NgxPermissionsService },\r\n        { type: NgxPermissionsConfigurationService },\r\n        { type: NgxRolesService },\r\n        { type: ViewContainerRef },\r\n        { type: ChangeDetectorRef },\r\n        { type: TemplateRef }\r\n    ]; };\r\n    NgxPermissionsDirective.propDecorators = {\r\n        ngxPermissionsOnly: [{ type: Input }],\r\n        ngxPermissionsOnlyThen: [{ type: Input }],\r\n        ngxPermissionsOnlyElse: [{ type: Input }],\r\n        ngxPermissionsExcept: [{ type: Input }],\r\n        ngxPermissionsExceptElse: [{ type: Input }],\r\n        ngxPermissionsExceptThen: [{ type: Input }],\r\n        ngxPermissionsThen: [{ type: Input }],\r\n        ngxPermissionsElse: [{ type: Input }],\r\n        ngxPermissionsOnlyAuthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsOnlyUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsExceptUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsExceptAuthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsAuthorisedStrategy: [{ type: Input }],\r\n        permissionsAuthorized: [{ type: Output }],\r\n        permissionsUnauthorized: [{ type: Output }]\r\n    };\r\n    return NgxPermissionsDirective;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxPermissionsGuard = /** @class */ (function () {\r\n    function NgxPermissionsGuard(permissionsService, rolesService, router) {\r\n        this.permissionsService = permissionsService;\r\n        this.rolesService = rolesService;\r\n        this.router = router;\r\n    }\r\n    /**\r\n     * @param {?} route\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.canActivate = /**\r\n     * @param {?} route\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    function (route, state) {\r\n        return this.hasPermissions(route, state);\r\n    };\r\n    /**\r\n     * @param {?} childRoute\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.canActivateChild = /**\r\n     * @param {?} childRoute\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    function (childRoute, state) {\r\n        return this.hasPermissions(childRoute, state);\r\n    };\r\n    /**\r\n     * @param {?} route\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.canLoad = /**\r\n     * @param {?} route\r\n     * @return {?}\r\n     */\r\n    function (route) {\r\n        return this.hasPermissions(route);\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.hasPermissions = /**\r\n     * @private\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    function (route, state) {\r\n        /** @type {?} */\r\n        var purePermissions = !!route && route.data ? (/** @type {?} */ (route.data['permissions'])) : {};\r\n        /** @type {?} */\r\n        var permissions = this.transformPermission(purePermissions, route, state);\r\n        if (this.isParameterAvailable(permissions.except)) {\r\n            return this.passingExceptPermissionsValidation(permissions, route, state);\r\n        }\r\n        if (this.isParameterAvailable(permissions.only)) {\r\n            return this.passingOnlyPermissionsValidation(permissions, route, state);\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} purePermissions\r\n     * @param {?} route\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.transformPermission = /**\r\n     * @private\r\n     * @param {?} purePermissions\r\n     * @param {?} route\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    function (purePermissions, route, state) {\r\n        /** @type {?} */\r\n        var permissions = __assign({}, purePermissions);\r\n        if (isFunction(permissions.except)) {\r\n            permissions.except = ((/** @type {?} */ (permissions.except)))(route, state);\r\n        }\r\n        if (isFunction(permissions.only)) {\r\n            permissions.only = ((/** @type {?} */ (permissions.only)))(route, state);\r\n        }\r\n        permissions.except = transformStringToArray(permissions.except);\r\n        permissions.only = transformStringToArray(permissions.only);\r\n        return permissions;\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} permission\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.isParameterAvailable = /**\r\n     * @private\r\n     * @param {?} permission\r\n     * @return {?}\r\n     */\r\n    function (permission) {\r\n        return !!(permission) && permission.length > 0;\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} route\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.passingExceptPermissionsValidation = /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} route\r\n     * @param {?} state\r\n     * @return {?}\r\n     */\r\n    function (permissions, route, state) {\r\n        var _this = this;\r\n        if (!!permissions.redirectTo && ((isFunction(permissions.redirectTo)) || (isPlainObject(permissions.redirectTo) && !this.isRedirectionWithParameters(permissions.redirectTo)))) {\r\n            /** @type {?} */\r\n            var failedPermission_1 = '';\r\n            return from((/** @type {?} */ (permissions.except))).pipe(mergeMap((/**\r\n             * @param {?} data\r\n             * @return {?}\r\n             */\r\n            function (data) {\r\n                return forkJoin([\r\n                    _this.permissionsService.hasPermission((/** @type {?} */ (data))),\r\n                    _this.rolesService.hasOnlyRoles((/** @type {?} */ (data)))\r\n                ]).pipe(tap((/**\r\n                 * @param {?} hasPermissions\r\n                 * @return {?}\r\n                 */\r\n                function (hasPermissions) {\r\n                    /** @type {?} */\r\n                    var dontHavePermissions = hasPermissions.every((/**\r\n                     * @param {?} data\r\n                     * @return {?}\r\n                     */\r\n                    function (data) { return data === false; }));\r\n                    if (!dontHavePermissions) {\r\n                        failedPermission_1 = data;\r\n                    }\r\n                })));\r\n            })), first((/**\r\n             * @param {?} data\r\n             * @return {?}\r\n             */\r\n            function (data) { return data.some((/**\r\n             * @param {?} data\r\n             * @return {?}\r\n             */\r\n            function (data) { return data === true; })); }), false), mergeMap((/**\r\n             * @param {?} isAllFalse\r\n             * @return {?}\r\n             */\r\n            function (isAllFalse) {\r\n                if (!!failedPermission_1) {\r\n                    _this.handleRedirectOfFailedPermission(permissions, failedPermission_1, route, state);\r\n                    return of(false);\r\n                }\r\n                if (!isAllFalse && permissions.only) {\r\n                    return _this.onlyRedirectCheck(permissions, route, state);\r\n                }\r\n                return of(!isAllFalse);\r\n            }))).toPromise();\r\n        }\r\n        return Promise.all([this.permissionsService.hasPermission((/** @type {?} */ (permissions.except))), this.rolesService.hasOnlyRoles((/** @type {?} */ (permissions.except)))])\r\n            .then((/**\r\n         * @param {?} __0\r\n         * @return {?}\r\n         */\r\n        function (_a) {\r\n            var _b = __read(_a, 2), hasPermission = _b[0], hasRoles = _b[1];\r\n            if (hasPermission || hasRoles) {\r\n                if (permissions.redirectTo) {\r\n                    _this.redirectToAnotherRoute(permissions.redirectTo, route, state);\r\n                }\r\n                return false;\r\n            }\r\n            if (permissions.only) {\r\n                return _this.checkOnlyPermissions(permissions, route, state);\r\n            }\r\n            return true;\r\n        }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} redirectTo\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @param {?=} failedPermissionName\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.redirectToAnotherRoute = /**\r\n     * @private\r\n     * @param {?} redirectTo\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @param {?=} failedPermissionName\r\n     * @return {?}\r\n     */\r\n    function (redirectTo, route, state, failedPermissionName) {\r\n        if (isFunction(redirectTo)) {\r\n            redirectTo = ((/** @type {?} */ (redirectTo)))(failedPermissionName, route, state);\r\n        }\r\n        if (this.isRedirectionWithParameters(redirectTo)) {\r\n            if (this.hasNavigationExtrasAsFunction(redirectTo)) {\r\n                ((/** @type {?} */ (redirectTo))).navigationExtras = ((/** @type {?} */ (((/** @type {?} */ (redirectTo))).navigationExtras)))(route, state);\r\n            }\r\n            if (this.hasNavigationCommandsAsFunction(redirectTo)) {\r\n                ((/** @type {?} */ (redirectTo))).navigationCommands = ((/** @type {?} */ (((/** @type {?} */ (redirectTo))).navigationCommands)))(route, state);\r\n            }\r\n            this.router.navigate(((/** @type {?} */ (((/** @type {?} */ (redirectTo))).navigationCommands))), ((/** @type {?} */ (((/** @type {?} */ (redirectTo))).navigationExtras))));\r\n            return;\r\n        }\r\n        if (Array.isArray(redirectTo)) {\r\n            this.router.navigate(redirectTo);\r\n        }\r\n        else {\r\n            this.router.navigate([redirectTo]);\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} object\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.isRedirectionWithParameters = /**\r\n     * @private\r\n     * @param {?} object\r\n     * @return {?}\r\n     */\r\n    function (object) {\r\n        return isPlainObject(object) && (!!object.navigationCommands || !!object.navigationExtras);\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} redirectTo\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.hasNavigationExtrasAsFunction = /**\r\n     * @private\r\n     * @param {?} redirectTo\r\n     * @return {?}\r\n     */\r\n    function (redirectTo) {\r\n        return !!((/** @type {?} */ (redirectTo))).navigationExtras &&\r\n            isFunction(((/** @type {?} */ (redirectTo))).navigationExtras);\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} redirectTo\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.hasNavigationCommandsAsFunction = /**\r\n     * @private\r\n     * @param {?} redirectTo\r\n     * @return {?}\r\n     */\r\n    function (redirectTo) {\r\n        return !!((/** @type {?} */ (redirectTo))).navigationCommands &&\r\n            isFunction(((/** @type {?} */ (redirectTo))).navigationCommands);\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.onlyRedirectCheck = /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    function (permissions, route, state) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var failedPermission = '';\r\n        return from(permissions.only).pipe(mergeMap((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) {\r\n            return forkJoin([\r\n                _this.permissionsService.hasPermission((/** @type {?} */ (data))),\r\n                _this.rolesService.hasOnlyRoles((/** @type {?} */ (data)))\r\n            ]).pipe(tap((/**\r\n             * @param {?} hasPermission\r\n             * @return {?}\r\n             */\r\n            function (hasPermission) {\r\n                /** @type {?} */\r\n                var failed = hasPermission.every((/**\r\n                 * @param {?} data\r\n                 * @return {?}\r\n                 */\r\n                function (data) { return data === false; }));\r\n                if (failed) {\r\n                    failedPermission = data;\r\n                }\r\n            })));\r\n        })), first((/**\r\n         * @param {?} data\r\n         * @return {?}\r\n         */\r\n        function (data) {\r\n            if (isFunction(permissions.redirectTo)) {\r\n                return data.some((/**\r\n                 * @param {?} data\r\n                 * @return {?}\r\n                 */\r\n                function (data) { return data === true; }));\r\n            }\r\n            return data.every((/**\r\n             * @param {?} data\r\n             * @return {?}\r\n             */\r\n            function (data) { return data === false; }));\r\n        }), false), mergeMap((/**\r\n         * @param {?} pass\r\n         * @return {?}\r\n         */\r\n        function (pass) {\r\n            if (isFunction(permissions.redirectTo)) {\r\n                if (pass) {\r\n                    return of(true);\r\n                }\r\n                else {\r\n                    _this.handleRedirectOfFailedPermission(permissions, failedPermission, route, state);\r\n                    return of(false);\r\n                }\r\n            }\r\n            else {\r\n                if (!!failedPermission) {\r\n                    _this.handleRedirectOfFailedPermission(permissions, failedPermission, route, state);\r\n                }\r\n                return of(!pass);\r\n            }\r\n        }))).toPromise();\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} failedPermission\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.handleRedirectOfFailedPermission = /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} failedPermission\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    function (permissions, failedPermission, route, state) {\r\n        if (this.isFailedPermissionPropertyOfRedirectTo(permissions, failedPermission)) {\r\n            this.redirectToAnotherRoute(((/** @type {?} */ (permissions.redirectTo)))[failedPermission], route, state, failedPermission);\r\n        }\r\n        else {\r\n            if (isFunction(permissions.redirectTo)) {\r\n                this.redirectToAnotherRoute(((/** @type {?} */ (permissions.redirectTo))), route, state, failedPermission);\r\n            }\r\n            else {\r\n                this.redirectToAnotherRoute(((/** @type {?} */ (permissions.redirectTo)))['default'], route, state, failedPermission);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} failedPermission\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.isFailedPermissionPropertyOfRedirectTo = /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} failedPermission\r\n     * @return {?}\r\n     */\r\n    function (permissions, failedPermission) {\r\n        return !!permissions.redirectTo && permissions.redirectTo[(/** @type {?} */ (failedPermission))];\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} purePermissions\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.checkOnlyPermissions = /**\r\n     * @private\r\n     * @param {?} purePermissions\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    function (purePermissions, route, state) {\r\n        var _this = this;\r\n        /** @type {?} */\r\n        var permissions = __assign({}, purePermissions);\r\n        return Promise.all([this.permissionsService.hasPermission((/** @type {?} */ (permissions.only))), this.rolesService.hasOnlyRoles((/** @type {?} */ (permissions.only)))])\r\n            .then((/**\r\n         * @param {?} __0\r\n         * @return {?}\r\n         */\r\n        function (_a) {\r\n            var _b = __read(_a, 2), hasPermission = _b[0], hasRole = _b[1];\r\n            if (hasPermission || hasRole)\r\n                return true;\r\n            if (permissions.redirectTo) {\r\n                _this.redirectToAnotherRoute(permissions.redirectTo, route, state);\r\n            }\r\n            return false;\r\n        }));\r\n    };\r\n    /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsGuard.prototype.passingOnlyPermissionsValidation = /**\r\n     * @private\r\n     * @param {?} permissions\r\n     * @param {?} route\r\n     * @param {?=} state\r\n     * @return {?}\r\n     */\r\n    function (permissions, route, state) {\r\n        if ((isFunction(permissions.redirectTo) || isPlainObject(permissions.redirectTo) && !this.isRedirectionWithParameters(permissions.redirectTo))) {\r\n            return this.onlyRedirectCheck(permissions, route, state);\r\n        }\r\n        return this.checkOnlyPermissions(permissions, route, state);\r\n    };\r\n    NgxPermissionsGuard.decorators = [\r\n        { type: Injectable }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsGuard.ctorParameters = function () { return [\r\n        { type: NgxPermissionsService },\r\n        { type: NgxRolesService },\r\n        { type: Router }\r\n    ]; };\r\n    return NgxPermissionsGuard;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxPermissionsAllowStubDirective = /** @class */ (function () {\r\n    function NgxPermissionsAllowStubDirective(viewContainer, templateRef) {\r\n        this.viewContainer = viewContainer;\r\n        this.templateRef = templateRef;\r\n        this.permissionsAuthorized = new EventEmitter();\r\n        this.permissionsUnauthorized = new EventEmitter();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsAllowStubDirective.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.viewContainer.clear();\r\n        this.viewContainer.createEmbeddedView(this.getAuthorizedTemplate());\r\n        this.permissionsUnauthorized.emit();\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsAllowStubDirective.prototype.getAuthorizedTemplate = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.ngxPermissionsOnlyThen ||\r\n            this.ngxPermissionsExceptThen ||\r\n            this.ngxPermissionsThen ||\r\n            this.templateRef;\r\n    };\r\n    NgxPermissionsAllowStubDirective.decorators = [\r\n        { type: Directive, args: [{\r\n                    selector: '[ngxPermissionsOnly],[ngxPermissionsExcept]'\r\n                },] }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsAllowStubDirective.ctorParameters = function () { return [\r\n        { type: ViewContainerRef },\r\n        { type: TemplateRef }\r\n    ]; };\r\n    NgxPermissionsAllowStubDirective.propDecorators = {\r\n        ngxPermissionsOnly: [{ type: Input }],\r\n        ngxPermissionsOnlyThen: [{ type: Input }],\r\n        ngxPermissionsOnlyElse: [{ type: Input }],\r\n        ngxPermissionsExcept: [{ type: Input }],\r\n        ngxPermissionsExceptElse: [{ type: Input }],\r\n        ngxPermissionsExceptThen: [{ type: Input }],\r\n        ngxPermissionsThen: [{ type: Input }],\r\n        ngxPermissionsElse: [{ type: Input }],\r\n        ngxPermissionsOnlyAuthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsOnlyUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsExceptUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsExceptAuthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsAuthorisedStrategy: [{ type: Input }],\r\n        permissionsAuthorized: [{ type: Output }],\r\n        permissionsUnauthorized: [{ type: Output }]\r\n    };\r\n    return NgxPermissionsAllowStubDirective;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxPermissionsRestrictStubDirective = /** @class */ (function () {\r\n    function NgxPermissionsRestrictStubDirective(viewContainer) {\r\n        this.viewContainer = viewContainer;\r\n        this.permissionsAuthorized = new EventEmitter();\r\n        this.permissionsUnauthorized = new EventEmitter();\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsRestrictStubDirective.prototype.ngOnInit = /**\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        this.viewContainer.clear();\r\n        if (this.getUnAuthorizedTemplate()) {\r\n            this.viewContainer.createEmbeddedView(this.getUnAuthorizedTemplate());\r\n        }\r\n        this.permissionsUnauthorized.emit();\r\n    };\r\n    /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsRestrictStubDirective.prototype.getUnAuthorizedTemplate = /**\r\n     * @private\r\n     * @return {?}\r\n     */\r\n    function () {\r\n        return this.ngxPermissionsOnlyElse ||\r\n            this.ngxPermissionsExceptElse ||\r\n            this.ngxPermissionsElse;\r\n    };\r\n    NgxPermissionsRestrictStubDirective.decorators = [\r\n        { type: Directive, args: [{\r\n                    selector: '[ngxPermissionsOnly],[ngxPermissionsExcept]'\r\n                },] }\r\n    ];\r\n    /** @nocollapse */\r\n    NgxPermissionsRestrictStubDirective.ctorParameters = function () { return [\r\n        { type: ViewContainerRef }\r\n    ]; };\r\n    NgxPermissionsRestrictStubDirective.propDecorators = {\r\n        ngxPermissionsOnly: [{ type: Input }],\r\n        ngxPermissionsOnlyThen: [{ type: Input }],\r\n        ngxPermissionsOnlyElse: [{ type: Input }],\r\n        ngxPermissionsExcept: [{ type: Input }],\r\n        ngxPermissionsExceptElse: [{ type: Input }],\r\n        ngxPermissionsExceptThen: [{ type: Input }],\r\n        ngxPermissionsThen: [{ type: Input }],\r\n        ngxPermissionsElse: [{ type: Input }],\r\n        ngxPermissionsOnlyAuthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsOnlyUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsExceptUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsExceptAuthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsUnauthorisedStrategy: [{ type: Input }],\r\n        ngxPermissionsAuthorisedStrategy: [{ type: Input }],\r\n        permissionsAuthorized: [{ type: Output }],\r\n        permissionsUnauthorized: [{ type: Output }]\r\n    };\r\n    return NgxPermissionsRestrictStubDirective;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxRole = /** @class */ (function () {\r\n    function NgxRole(name, validationFunction) {\r\n        this.name = name;\r\n        this.validationFunction = validationFunction;\r\n    }\r\n    return NgxRole;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\r\nvar NgxPermissionsModule = /** @class */ (function () {\r\n    function NgxPermissionsModule() {\r\n    }\r\n    /**\r\n     * @param {?=} config\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsModule.forRoot = /**\r\n     * @param {?=} config\r\n     * @return {?}\r\n     */\r\n    function (config) {\r\n        if (config === void 0) { config = {}; }\r\n        return {\r\n            ngModule: NgxPermissionsModule,\r\n            providers: [\r\n                NgxPermissionsStore,\r\n                NgxRolesStore,\r\n                NgxPermissionsConfigurationStore,\r\n                NgxPermissionsService,\r\n                NgxPermissionsGuard,\r\n                NgxRolesService,\r\n                NgxPermissionsConfigurationService,\r\n                { provide: USE_PERMISSIONS_STORE, useValue: config.permissionsIsolate },\r\n                { provide: USE_ROLES_STORE, useValue: config.rolesIsolate },\r\n                { provide: USE_CONFIGURATION_STORE, useValue: config.configurationIsolate },\r\n            ]\r\n        };\r\n    };\r\n    /**\r\n     * @param {?=} config\r\n     * @return {?}\r\n     */\r\n    NgxPermissionsModule.forChild = /**\r\n     * @param {?=} config\r\n     * @return {?}\r\n     */\r\n    function (config) {\r\n        if (config === void 0) { config = {}; }\r\n        return {\r\n            ngModule: NgxPermissionsModule,\r\n            providers: [\r\n                { provide: USE_PERMISSIONS_STORE, useValue: config.permissionsIsolate },\r\n                { provide: USE_ROLES_STORE, useValue: config.rolesIsolate },\r\n                { provide: USE_CONFIGURATION_STORE, useValue: config.configurationIsolate },\r\n                NgxPermissionsConfigurationService,\r\n                NgxPermissionsService,\r\n                NgxRolesService,\r\n                NgxPermissionsGuard\r\n            ]\r\n        };\r\n    };\r\n    NgxPermissionsModule.decorators = [\r\n        { type: NgModule, args: [{\r\n                    imports: [],\r\n                    declarations: [\r\n                        NgxPermissionsDirective\r\n                    ],\r\n                    exports: [\r\n                        NgxPermissionsDirective\r\n                    ]\r\n                },] }\r\n    ];\r\n    return NgxPermissionsModule;\r\n}());\r\nvar NgxPermissionsAllowStubModule = /** @class */ (function () {\r\n    function NgxPermissionsAllowStubModule() {\r\n    }\r\n    NgxPermissionsAllowStubModule.decorators = [\r\n        { type: NgModule, args: [{\r\n                    imports: [],\r\n                    declarations: [\r\n                        NgxPermissionsAllowStubDirective\r\n                    ],\r\n                    exports: [\r\n                        NgxPermissionsAllowStubDirective\r\n                    ]\r\n                },] }\r\n    ];\r\n    return NgxPermissionsAllowStubModule;\r\n}());\r\nvar NgxPermissionsRestrictStubModule = /** @class */ (function () {\r\n    function NgxPermissionsRestrictStubModule() {\r\n    }\r\n    NgxPermissionsRestrictStubModule.decorators = [\r\n        { type: NgModule, args: [{\r\n                    imports: [],\r\n                    declarations: [\r\n                        NgxPermissionsRestrictStubDirective\r\n                    ],\r\n                    exports: [\r\n                        NgxPermissionsRestrictStubDirective\r\n                    ]\r\n                },] }\r\n    ];\r\n    return NgxPermissionsRestrictStubModule;\r\n}());\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\r\n */\n\nexport { NgxPermissionsAllowStubDirective, NgxPermissionsAllowStubModule, NgxPermissionsConfigurationService, NgxPermissionsConfigurationStore, NgxPermissionsDirective, NgxPermissionsGuard, NgxPermissionsModule, NgxPermissionsPredefinedStrategies, NgxPermissionsRestrictStubDirective, NgxPermissionsRestrictStubModule, NgxPermissionsService, NgxPermissionsStore, NgxRole, NgxRolesService, NgxRolesStore, USE_CONFIGURATION_STORE, USE_PERMISSIONS_STORE, USE_ROLES_STORE };\n"]}