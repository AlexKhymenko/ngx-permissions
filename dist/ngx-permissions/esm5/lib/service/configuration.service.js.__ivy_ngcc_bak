/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Inject, Injectable, InjectionToken } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { NgxPermissionsPredefinedStrategies } from '../enums/predefined-strategies.enum';
import { NgxPermissionsConfigurationStore } from '../store/configuration.store';
/** @type {?} */
export var USE_CONFIGURATION_STORE = new InjectionToken('USE_CONFIGURATION_STORE');
var NgxPermissionsConfigurationService = /** @class */ (function () {
    function NgxPermissionsConfigurationService(isolate, configurationStore) {
        if (isolate === void 0) { isolate = false; }
        this.isolate = isolate;
        this.configurationStore = configurationStore;
        this.strategiesSource = this.isolate ? new BehaviorSubject({}) : this.configurationStore.strategiesSource;
        this.strategies$ = this.strategiesSource.asObservable();
        this.onAuthorisedDefaultStrategy = this.isolate ? undefined : this.configurationStore.onAuthorisedDefaultStrategy;
        this.onUnAuthorisedDefaultStrategy = this.isolate ? undefined : this.configurationStore.onUnAuthorisedDefaultStrategy;
    }
    /**
     * @param {?} name
     * @return {?}
     */
    NgxPermissionsConfigurationService.prototype.setDefaultOnAuthorizedStrategy = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (this.isolate) {
            this.onAuthorisedDefaultStrategy = this.getDefinedStrategy(name);
        }
        else {
            this.configurationStore.onAuthorisedDefaultStrategy = this.getDefinedStrategy(name);
            this.onAuthorisedDefaultStrategy = this.configurationStore.onAuthorisedDefaultStrategy;
        }
    };
    /**
     * @param {?} name
     * @return {?}
     */
    NgxPermissionsConfigurationService.prototype.setDefaultOnUnauthorizedStrategy = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (this.isolate) {
            this.onUnAuthorisedDefaultStrategy = this.getDefinedStrategy(name);
        }
        else {
            this.configurationStore.onUnAuthorisedDefaultStrategy = this.getDefinedStrategy(name);
            this.onUnAuthorisedDefaultStrategy = this.configurationStore.onUnAuthorisedDefaultStrategy;
        }
    };
    /**
     * @param {?} key
     * @param {?} func
     * @return {?}
     */
    NgxPermissionsConfigurationService.prototype.addPermissionStrategy = /**
     * @param {?} key
     * @param {?} func
     * @return {?}
     */
    function (key, func) {
        this.strategiesSource.value[key] = func;
    };
    /**
     * @param {?} key
     * @return {?}
     */
    NgxPermissionsConfigurationService.prototype.getStrategy = /**
     * @param {?} key
     * @return {?}
     */
    function (key) {
        return this.strategiesSource.value[key];
    };
    /**
     * @return {?}
     */
    NgxPermissionsConfigurationService.prototype.getAllStrategies = /**
     * @return {?}
     */
    function () {
        return this.strategiesSource.value;
    };
    /**
     * @private
     * @param {?} name
     * @return {?}
     */
    NgxPermissionsConfigurationService.prototype.getDefinedStrategy = /**
     * @private
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (this.strategiesSource.value[name] || this.isPredefinedStrategy(name)) {
            return name;
        }
        else {
            throw new Error("No ' " + name + " ' strategy is found please define one");
        }
    };
    /**
     * @private
     * @param {?} strategy
     * @return {?}
     */
    NgxPermissionsConfigurationService.prototype.isPredefinedStrategy = /**
     * @private
     * @param {?} strategy
     * @return {?}
     */
    function (strategy) {
        return strategy === NgxPermissionsPredefinedStrategies.SHOW || strategy === NgxPermissionsPredefinedStrategies.REMOVE;
    };
    NgxPermissionsConfigurationService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    NgxPermissionsConfigurationService.ctorParameters = function () { return [
        { type: Boolean, decorators: [{ type: Inject, args: [USE_CONFIGURATION_STORE,] }] },
        { type: NgxPermissionsConfigurationStore }
    ]; };
    return NgxPermissionsConfigurationService;
}());
export { NgxPermissionsConfigurationService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    NgxPermissionsConfigurationService.prototype.strategiesSource;
    /** @type {?} */
    NgxPermissionsConfigurationService.prototype.strategies$;
    /** @type {?} */
    NgxPermissionsConfigurationService.prototype.onAuthorisedDefaultStrategy;
    /** @type {?} */
    NgxPermissionsConfigurationService.prototype.onUnAuthorisedDefaultStrategy;
    /**
     * @type {?}
     * @private
     */
    NgxPermissionsConfigurationService.prototype.isolate;
    /**
     * @type {?}
     * @private
     */
    NgxPermissionsConfigurationService.prototype.configurationStore;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdGlvbi5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXBlcm1pc3Npb25zLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2UvY29uZmlndXJhdGlvbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxjQUFjLEVBQWUsTUFBTSxlQUFlLENBQUM7QUFDaEYsT0FBTyxFQUFFLGVBQWUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUNuRCxPQUFPLEVBQUUsa0NBQWtDLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUN6RixPQUFPLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQzs7QUFTaEYsTUFBTSxLQUFPLHVCQUF1QixHQUFHLElBQUksY0FBYyxDQUFDLHlCQUF5QixDQUFDO0FBRXBGO0lBUUksNENBQzZDLE9BQXdCLEVBQ3pELGtCQUFvRDtRQURuQix3QkFBQSxFQUFBLGVBQXdCO1FBQXhCLFlBQU8sR0FBUCxPQUFPLENBQWlCO1FBQ3pELHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBa0M7UUFFNUQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksZUFBZSxDQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUM7UUFDcEgsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLENBQUM7UUFFeEQsSUFBSSxDQUFDLDJCQUEyQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLDJCQUEyQixDQUFDO1FBQ2xILElBQUksQ0FBQyw2QkFBNkIsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyw2QkFBNkIsQ0FBQztJQUUxSCxDQUFDOzs7OztJQUVNLDJFQUE4Qjs7OztJQUFyQyxVQUFzQyxJQUFnQztRQUNsRSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDZCxJQUFJLENBQUMsMkJBQTJCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3BFO2FBQU07WUFDSCxJQUFJLENBQUMsa0JBQWtCLENBQUMsMkJBQTJCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BGLElBQUksQ0FBQywyQkFBMkIsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsMkJBQTJCLENBQUM7U0FDMUY7SUFDTCxDQUFDOzs7OztJQUVNLDZFQUFnQzs7OztJQUF2QyxVQUF3QyxJQUFnQztRQUNwRSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDZCxJQUFJLENBQUMsNkJBQTZCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3RFO2FBQU07WUFDSCxJQUFJLENBQUMsa0JBQWtCLENBQUMsNkJBQTZCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RGLElBQUksQ0FBQyw2QkFBNkIsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsNkJBQTZCLENBQUM7U0FDOUY7SUFDTCxDQUFDOzs7Ozs7SUFFTSxrRUFBcUI7Ozs7O0lBQTVCLFVBQTZCLEdBQVcsRUFBRSxJQUFzQjtRQUM1RCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUM1QyxDQUFDOzs7OztJQUVNLHdEQUFXOzs7O0lBQWxCLFVBQW1CLEdBQVc7UUFDMUIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVDLENBQUM7Ozs7SUFFTSw2REFBZ0I7OztJQUF2QjtRQUNJLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQztJQUN2QyxDQUFDOzs7Ozs7SUFFTywrREFBa0I7Ozs7O0lBQTFCLFVBQTJCLElBQWdDO1FBQ3ZELElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEUsT0FBTyxJQUFJLENBQUM7U0FDZjthQUFNO1lBQ0gsTUFBTSxJQUFJLEtBQUssQ0FBQyxVQUFRLElBQUksMkNBQXdDLENBQUMsQ0FBQztTQUN6RTtJQUNMLENBQUM7Ozs7OztJQUVPLGlFQUFvQjs7Ozs7SUFBNUIsVUFBNkIsUUFBZ0I7UUFDekMsT0FBTyxRQUFRLEtBQUssa0NBQWtDLENBQUMsSUFBSSxJQUFJLFFBQVEsS0FBSyxrQ0FBa0MsQ0FBQyxNQUFNLENBQUM7SUFDMUgsQ0FBQzs7Z0JBNURKLFVBQVU7Ozs7OENBU0YsTUFBTSxTQUFDLHVCQUF1QjtnQkFwQjlCLGdDQUFnQzs7SUF5RXpDLHlDQUFDO0NBQUEsQUE5REQsSUE4REM7U0E3RFksa0NBQWtDOzs7Ozs7SUFFM0MsOERBQW9EOztJQUNwRCx5REFBeUM7O0lBQ3pDLHlFQUF1RDs7SUFDdkQsMkVBQXlEOzs7OztJQUdyRCxxREFBaUU7Ozs7O0lBQ2pFLGdFQUE0RCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgSW5qZWN0aW9uVG9rZW4sIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBOZ3hQZXJtaXNzaW9uc1ByZWRlZmluZWRTdHJhdGVnaWVzIH0gZnJvbSAnLi4vZW51bXMvcHJlZGVmaW5lZC1zdHJhdGVnaWVzLmVudW0nO1xyXG5pbXBvcnQgeyBOZ3hQZXJtaXNzaW9uc0NvbmZpZ3VyYXRpb25TdG9yZSB9IGZyb20gJy4uL3N0b3JlL2NvbmZpZ3VyYXRpb24uc3RvcmUnO1xyXG5pbXBvcnQgeyBQZXJtaXNzaW9uU3RhdGUgfSBmcm9tICcuLi9kaXJlY3RpdmUvcGVybWlzc2lvbnMuZGlyZWN0aXZlJztcclxuXHJcbmV4cG9ydCB0eXBlIFN0cmF0ZWd5RnVuY3Rpb24gPSAodGVtcGxhdGVSZWY6IFRlbXBsYXRlUmVmPGFueT4sIHBlcm1pc3Npb25zPzogUGVybWlzc2lvblN0YXRlKSA9PiB2b2lkO1xyXG5cclxuZXhwb3J0IHR5cGUgU3RyYXRlZ3kgPSB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBTdHJhdGVneUZ1bmN0aW9uXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgVVNFX0NPTkZJR1VSQVRJT05fU1RPUkUgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ1VTRV9DT05GSUdVUkFUSU9OX1NUT1JFJyk7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBOZ3hQZXJtaXNzaW9uc0NvbmZpZ3VyYXRpb25TZXJ2aWNlIHtcclxuXHJcbiAgICBwcml2YXRlIHN0cmF0ZWdpZXNTb3VyY2U6IEJlaGF2aW9yU3ViamVjdDxTdHJhdGVneT47XHJcbiAgICBwdWJsaWMgc3RyYXRlZ2llcyQ6IE9ic2VydmFibGU8U3RyYXRlZ3k+O1xyXG4gICAgcHVibGljIG9uQXV0aG9yaXNlZERlZmF1bHRTdHJhdGVneTogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gICAgcHVibGljIG9uVW5BdXRob3Jpc2VkRGVmYXVsdFN0cmF0ZWd5OiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgQEluamVjdChVU0VfQ09ORklHVVJBVElPTl9TVE9SRSkgcHJpdmF0ZSBpc29sYXRlOiBib29sZWFuID0gZmFsc2UsXHJcbiAgICAgICAgcHJpdmF0ZSBjb25maWd1cmF0aW9uU3RvcmU6IE5neFBlcm1pc3Npb25zQ29uZmlndXJhdGlvblN0b3JlXHJcbiAgICApIHtcclxuICAgICAgICB0aGlzLnN0cmF0ZWdpZXNTb3VyY2UgPSB0aGlzLmlzb2xhdGUgPyBuZXcgQmVoYXZpb3JTdWJqZWN0PFN0cmF0ZWd5Pih7fSkgOiB0aGlzLmNvbmZpZ3VyYXRpb25TdG9yZS5zdHJhdGVnaWVzU291cmNlO1xyXG4gICAgICAgIHRoaXMuc3RyYXRlZ2llcyQgPSB0aGlzLnN0cmF0ZWdpZXNTb3VyY2UuYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gICAgICAgIHRoaXMub25BdXRob3Jpc2VkRGVmYXVsdFN0cmF0ZWd5ID0gdGhpcy5pc29sYXRlID8gdW5kZWZpbmVkIDogdGhpcy5jb25maWd1cmF0aW9uU3RvcmUub25BdXRob3Jpc2VkRGVmYXVsdFN0cmF0ZWd5O1xyXG4gICAgICAgIHRoaXMub25VbkF1dGhvcmlzZWREZWZhdWx0U3RyYXRlZ3kgPSB0aGlzLmlzb2xhdGUgPyB1bmRlZmluZWQgOiB0aGlzLmNvbmZpZ3VyYXRpb25TdG9yZS5vblVuQXV0aG9yaXNlZERlZmF1bHRTdHJhdGVneTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldERlZmF1bHRPbkF1dGhvcml6ZWRTdHJhdGVneShuYW1lOiBzdHJpbmcgfCAncmVtb3ZlJyB8ICdzaG93Jyk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzb2xhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5vbkF1dGhvcmlzZWREZWZhdWx0U3RyYXRlZ3kgPSB0aGlzLmdldERlZmluZWRTdHJhdGVneShuYW1lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb25TdG9yZS5vbkF1dGhvcmlzZWREZWZhdWx0U3RyYXRlZ3kgPSB0aGlzLmdldERlZmluZWRTdHJhdGVneShuYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5vbkF1dGhvcmlzZWREZWZhdWx0U3RyYXRlZ3kgPSB0aGlzLmNvbmZpZ3VyYXRpb25TdG9yZS5vbkF1dGhvcmlzZWREZWZhdWx0U3RyYXRlZ3k7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXREZWZhdWx0T25VbmF1dGhvcml6ZWRTdHJhdGVneShuYW1lOiBzdHJpbmcgfCAncmVtb3ZlJyB8ICdzaG93Jyk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmlzb2xhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5vblVuQXV0aG9yaXNlZERlZmF1bHRTdHJhdGVneSA9IHRoaXMuZ2V0RGVmaW5lZFN0cmF0ZWd5KG5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlndXJhdGlvblN0b3JlLm9uVW5BdXRob3Jpc2VkRGVmYXVsdFN0cmF0ZWd5ID0gdGhpcy5nZXREZWZpbmVkU3RyYXRlZ3kobmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMub25VbkF1dGhvcmlzZWREZWZhdWx0U3RyYXRlZ3kgPSB0aGlzLmNvbmZpZ3VyYXRpb25TdG9yZS5vblVuQXV0aG9yaXNlZERlZmF1bHRTdHJhdGVneTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZFBlcm1pc3Npb25TdHJhdGVneShrZXk6IHN0cmluZywgZnVuYzogU3RyYXRlZ3lGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RyYXRlZ2llc1NvdXJjZS52YWx1ZVtrZXldID0gZnVuYztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3RyYXRlZ3koa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHJhdGVnaWVzU291cmNlLnZhbHVlW2tleV07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFsbFN0cmF0ZWdpZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyYXRlZ2llc1NvdXJjZS52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldERlZmluZWRTdHJhdGVneShuYW1lOiBzdHJpbmcgfCAncmVtb3ZlJyB8ICdzaG93Jykge1xyXG4gICAgICAgIGlmICh0aGlzLnN0cmF0ZWdpZXNTb3VyY2UudmFsdWVbbmFtZV0gfHwgdGhpcy5pc1ByZWRlZmluZWRTdHJhdGVneShuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vICcgJHtuYW1lfSAnIHN0cmF0ZWd5IGlzIGZvdW5kIHBsZWFzZSBkZWZpbmUgb25lYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNQcmVkZWZpbmVkU3RyYXRlZ3koc3RyYXRlZ3k6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBzdHJhdGVneSA9PT0gTmd4UGVybWlzc2lvbnNQcmVkZWZpbmVkU3RyYXRlZ2llcy5TSE9XIHx8IHN0cmF0ZWd5ID09PSBOZ3hQZXJtaXNzaW9uc1ByZWRlZmluZWRTdHJhdGVnaWVzLlJFTU9WRTtcclxuICAgIH1cclxuXHJcbn1cclxuIl19